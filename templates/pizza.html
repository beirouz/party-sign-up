<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Pizza Order</title>
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
</head>
<body>

<!-- Navbar -->
<div class="w3-bar w3-red">
  <a href="/" class="w3-bar-item w3-button">Home</a>
  <a href="/link1" class="w3-bar-item w3-button">Pizza</a>
  <a href="/link2" class="w3-bar-item w3-button">View Orders</a>
  <a href="/link3" class="w3-bar-item w3-button">Appetizers</a>
  <a href="/link4" class="w3-bar-item w3-button">Expenses</a>
  <a href="/logout" class="w3-bar-item w3-button">Logout</a>
</div>

<!-- Content -->
<div class="w3-container w3-center">
  <h2>Pizza Order</h2>

  {% if user_order %}
    <h3>Your Current Order</h3>
    <p><strong>Crust:</strong> {{ user_order.crust }}</p>
    <p><strong>Sauce:</strong> {{ user_order.sauce }}</p>
    <p><strong>Toppings:</strong> {{ user_order.toppings | join(', ') }}</p>

    <!-- Button to allow editing the order -->
    <form method="POST">
      <button type="submit" name="edit_order" class="w3-button w3-blue">Edit Order</button>
    </form>
  {% endif %}

  {% if show_edit_form %}
    <h3>Customize Your Pizza</h3>
    <form method="POST">
      <label for="crust">Select Crust:</label>
      <select name="crust" id="crust" class="w3-select" required>
        {% for crust in crust_types %}
          <option value="{{ crust }}" {% if user_order and user_order.crust == crust %}selected{% endif %}>{{ crust }}</option>
        {% endfor %}
      </select><br><br>

      <label for="sauce">Select Sauce:</label>
      <select name="sauce" id="sauce" class="w3-select" required>
        {% for sauce in sauces %}
          <option value="{{ sauce }}" {% if user_order and user_order.sauce == sauce %}selected{% endif %}>{{ sauce }}</option>
        {% endfor %}
      </select><br><br>

      <label for="toppings">Select Toppings (Choose up to 4):</label><br>
      {% for topping in topping_options %}
        <input type="checkbox" name="toppings" value="{{ topping }}" {% if user_order and topping in user_order.toppings %}checked{% endif %}> {{ topping }}<br>
      {% endfor %}<br>

      <button type="submit" class="w3-button w3-green">Submit Order</button>
    </form>
  {% endif %}

  {% if error %}
    <p style="color: red;">{{ error }}</p>
  {% endif %}
</div>

</body>
</html>
